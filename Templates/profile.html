{% extends 'base.html'%}
{% block content%}


<style>
        .profile-like > svg{
            width: 30px;
            height: 30px;

        }
        .profile-img{
            width: 60px;
            height: 60px;
        }
    </style>
    

{% include 'menu.html' %} 
    

<!-- comments -->

<div class="modal fade " id="staticBackdrop1" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="parent-reply">
        <span class="reply"></span>
    

    </div>
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content  comment-pop">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">comments</h5>
                <button type="button" class="btn-close bg-info" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <span class="post-id" id="postid"></span>
                <span id="post-comments"></span>
                <h4 class="lead">post your comments......</h4>
                <textarea name="" id="cmtarea"></textarea>
                <button class="d-block get-comments" type="submit" id="getcomments">comment</button>
            </div>
            
        </div>
    </div>
</div>




<!-- comments -->

<!-- share -->



<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content copy-link-modal">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">copy link</h5>
                <button type="button" class="btn-close bg-info" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <input type="url" name="" id="url" class="w-100" readonly>
                <button class="copy-button">copy link</button>
                
            </div>
        </div>
    </div>
</div>

<!-- delete -->

<div class="modal fade" id="staticBackdrop2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content delete-modal">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Delete post</h5>
                <button type="button" class="btn-close bg-info" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <h5>are you sure you want to delete the post?</h5>
                
                
            </div>
            <div class="modal-footer" style="border: 0;">
                <button type="button" class="btn btn-info del-link" data-bs-dismiss="modal">cancel</button>
                <a href="#" class="del-link btn btn-danger">delete</a>
                
            </div>
        </div>
    </div>
</div>



<div class="container my-3">
    <div class="user-profile card p-2">
         <img src="{{url_for('static',filename=exe['PROFILE_PIC'])}}" alt="" class="mx-auto profile-img">
            <h4 class="text-center text-white">{{exe["USER_NAME"]}}</h4>
            <div class="bio-text-profile">
                <p class="text-center">
                    {{exe["USER_BIO"]}}
                </p>
            </div>
            <div class="count-box">
                <a href="{{url_for('authorquest')}}" class="question-box">
                    <h4>{{count_questions}}</h4>
                    <h6>questions</h6>

                </a>
                <div class="post-box">
                    <h4>{{count_post}}</h4>
                    <h6>post</h6>

                </div>
                <a href="{{url_for('authoranswer')}}" class="answer-box">
                    <h4>{{count_answers}}</h4>
                    <h6>answer</h6>

                </a>

                
            </div>
    </div>

</div>

{%if count_post == 0%}
   <h1 class="text-center text-white">no post yet..</h1>
{%endif%}


<div class="container-lg">
    <div class="row">
        {% for x in user_own_post %}
         
        <div class="col-lg-4 col-12">
            <div class="description-card">
                <div class="user-avatar my-1 p-1">
                    <img src="{{url_for('static',filename=x['PROFILE_PIC'])}}" alt="" class="profile-img">
                    <h4 class="mx-2 text-muted ">{{x["POSTED_BY"]}}</h4>
                    
                </div>
                <div class="description-text card p-3">
                    <p>{{x["POST_DESCRIPT"]}}</p>
                </div>
                <small class="text-muted">{{x['DATE']}}</small>
        
            </div>

        </div>
        <div class="col-lg-8 col-12">
            <div class="user-post-display my-2">
                <div class="apple px-2">
                    <div class=""><span class="kalp-fixed">{{x["LANG"]}}</span></div>
                    <h6 class="lead ms-auto me-3"><a href="{{url_for('uniquepost',id=x['POST_ID'])}}" class="visit-link">{{x["POSTED_BY"]}}</a></h6>
                    
                    
                    <h5 class="mx-2 text-white" id="like-counter{{x['POST_ID']}}" >{{x["LIKES"]}}</h5>
                    <button class="like-update mx-1" value="{{x['POST_ID']}}">
                        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
                            <path style="fill:#C03A2B;" d="M24.85,10.126c2.018-4.783,6.628-8.125,11.99-8.125c7.223,0,12.425,6.179,13.079,13.543
	c0,0,0.353,1.828-0.424,5.119c-1.058,4.482-3.545,8.464-6.898,11.503L24.85,48L7.402,32.165c-3.353-3.038-5.84-7.021-6.898-11.503
	c-0.777-3.291-0.424-5.119-0.424-5.119C0.734,8.179,5.936,2,13.159,2C18.522,2,22.832,5.343,24.85,10.126z" />
                            <path style="fill:#ED7161;" d="M6,18.078c-0.553,0-1-0.447-1-1c0-5.514,4.486-10,10-10c0.553,0,1,0.447,1,1s-0.447,1-1,1
	c-4.411,0-8,3.589-8,8C7,17.631,6.553,18.078,6,18.078z" />
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                        </svg>

                    </button>
                    <button type="button" class="share-svg mx-1" title="share" data-bs-toggle="modal" data-bs-target="#staticBackdrop" id="share"
                        value="{{x['POST_ID']}}">
                        <?xml version="1.0" encoding="iso-8859-1"?>
                        <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
                        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                            x="0px" y="0px" viewBox="0 0 503.82 503.82" style="enable-background:new 0 0 503.82 503.82;"
                            xml:space="preserve">
                            <g transform="translate(1 1)">
                                <path style="fill:#E2E3E5;" d="M491.909,112.838L221.64,311.763l167.869,109.115L502.82,114.517
		C501.981,114.517,501.142,112.838,491.909,112.838" />
                                <path style="fill:#B6B6B6;" d="M175.476,408.287l99.043-66.308" />
                                <g>
                                    <polygon style="fill:#CCCCCC;" points="209.05,299.173 175.476,408.287 274.519,341.979 		" />
                                    <polygon style="fill:#CCCCCC;" points="209.05,299.173 176.316,408.287 150.296,265.599 494.427,89.336 		" />
                                    <path style="fill:#CCCCCC;" d="M486.034,104.445c-3.357,0-5.875-1.679-7.554-4.197L209.05,299.173l167.869,109.115
			l111.633-303.843C488.552,104.445,487.712,104.445,486.034,104.445" />
                                </g>
                                <polygon style="fill:#E2E3E5;" points="444.066,122.91 209.05,299.173 360.132,391.5 460.853,114.517 	" />
                                <path style="fill:#FFFFFF;" d="M466.729,95.212L6.768,190.058l143.528,75.541l323.148-165.351
		C470.086,99.409,468.407,97.73,466.729,95.212" />
                                <path style="fill:#E2E3E5;" d="M444.066,114.517L32.788,206.845l117.508,58.754l299.646-146.046
		C447.424,118.714,444.906,117.035,444.066,114.517" />
                                <g>
                                    <path style="fill:#B6B6B6;" d="M376.919,416.681c-1.679,0-3.357-0.839-4.197-1.679L204.853,305.887
			c-2.518-0.839-4.197-3.357-4.197-6.715c0-2.518,0.839-5.036,3.357-6.715l201.443-147.725l-250.964,128.42
			c-2.518,0.839-5.036,0.839-7.554,0L3.411,197.612c-3.357-1.679-5.036-5.036-4.197-8.393c0-4.197,2.518-6.715,5.875-7.554
			l486.82-100.721c1.679,0,2.518,0,4.197,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0l0,0c1.679,0.839,3.357,1.679,5.036,3.357l0,0
			l0,0c0,0,0,0,0,0.839c1.679,1.679,1.679,3.357,1.679,5.036l0,0l0,0c0,0.839,0,0.839,0,1.679v0.839L385.312,411.645
			c-0.839,2.518-2.518,4.197-5.036,5.036C378.597,416.681,377.758,416.681,376.919,416.681z M224.158,298.333l148.564,96.525
			l104.079-282.02L224.158,298.333z M31.948,193.415l118.348,62.951L435.673,110.32L31.948,193.415z" />
                                    <path style="fill:#B6B6B6;" d="M175.476,416.681c-2.518,0-5.036-1.679-6.715-3.357c-2.518-4.197-1.679-9.233,2.518-11.751
			l99.043-66.308c4.197-2.518,9.233-1.679,11.751,2.518c2.518,4.197,1.679,9.233-2.518,11.751l-99.043,66.308
			C178.834,415.841,177.155,416.681,175.476,416.681z" />
                                    <path style="fill:#B6B6B6;" d="M176.316,416.681C175.476,416.681,175.476,416.681,176.316,416.681
			c-4.197,0-7.554-3.357-8.393-6.715l-26.02-142.689c-0.839-3.357,0.839-7.554,4.197-9.233L490.23,81.782
			c4.197-1.679,8.393-0.839,10.911,3.357c2.518,3.357,1.679,8.393-2.518,10.911l-282.02,208.157L183.87,410.805
			C183.03,414.163,179.673,416.681,176.316,416.681z M159.529,270.635l18.466,102.4l22.662-75.541
			c0.839-1.679,1.679-3.357,3.357-4.197l201.443-147.725L159.529,270.635z" />
                                    <path style="fill:#B6B6B6;" d="M175.476,416.681c-1.679,0-3.357-0.839-5.036-1.679c-2.518-2.518-4.197-5.875-3.357-9.233
			l33.574-109.115c0.839-2.518,2.518-4.197,5.036-5.036c2.518-0.839,5.036-0.839,7.554,0.839l65.469,42.807
			c2.518,1.679,4.197,4.197,4.197,6.715s-1.679,5.875-3.357,6.715l-99.043,66.308C178.834,415.841,177.155,416.681,175.476,416.681z
			 M214.086,312.602l-23.502,75.541l68.826-46.164L214.086,312.602z" />
                                </g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                            <g>
                            </g>
                        </svg>

                    </button>
                    <!-- <a href="{{url_for('uniquepost',id=x['POST_ID'])}}" class="btn btn-dark">comments</a> -->
                    <!-- Button trigger modal -->
                    <button type="button" id="comment" class="btn-svg mx-1" data-bs-toggle="modal" data-bs-target="#staticBackdrop1"
                        value="{{x['POST_ID']}}">
                        <svg width="48px" height="48px" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="48" height="48" fill="white" fill-opacity="0.01" />
                            <path d="M33 38H22V30H36V22H44V38H39L36 41L33 38Z" stroke="black" stroke-width="4"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M4 6H36V30H17L13 34L9 30H4V6Z" fill="#2F88FF" stroke="black" stroke-width="4"
                                stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M12 22H18" stroke="white" stroke-width="4" stroke-linecap="round" />
                            <path d="M12 14H24" stroke="white" stroke-width="4" stroke-linecap="round" />
                        </svg>

                    </button>
                    <a href="{{url_for('editpost',update=x['POST_ID'])}}" class="mx-1" style="color: var(--secondarycolor);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-pencil" viewBox="0 0 16 16">
                            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                          </svg>
                    </a>
                    <a href="{{url_for('download',dpid=x['POST_ID'],lg=x['LANG'])}}" class="mx-1 download-btn" style="color: var(--secondarycolor);" title="download">
                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-down" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.5 10a.5.5 0 0 1-.5-.5v-8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 0 0 1h2A1.5 1.5 0 0 0 14 9.5v-8A1.5 1.5 0 0 0 12.5 0h-9A1.5 1.5 0 0 0 2 1.5v8A1.5 1.5 0 0 0 3.5 11h2a.5.5 0 0 0 0-1h-2z"/>
                            <path fill-rule="evenodd" d="M7.646 15.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 14.293V5.5a.5.5 0 0 0-1 0v8.793l-2.146-2.147a.5.5 0 0 0-.708.708l3 3z"/>
                          </svg>
                    </a>

                    
                    <button type="button" class="btn btn-danger mx-1" data-bs-toggle="modal" data-bs-target="#staticBackdrop2" id="share"
                    value="{{url_for('deletepost',did=x['POST_ID'])}}">
                    delete
                    </button>
                    
               
                    
                </div>
                <div class="post-content my-2">
                    <pre>
                        <code>
{{x["POST_CODE"]}}
                        </code>
                    </pre>
                </div>

            </div>
            

        </div>
        {%endfor%}
    </div>


</div>

    
    



<script src="{{url_for('static',filename='css/jquery-3.6.0.min.js')}}"></script>

    <script>
            function slideout() {
                document.getElementById("side-bar").classList.toggle("left")
            }
            function drop() {
    
                document.getElementById("drop").classList.toggle("swp-class");
            }
            


            // comments 
            $(document).ready(function(){
        $("#getcomments").on("click",function(){
            let comment = $("#cmtarea").val()
            let postid = $("#postid").html()
            console.log(postid)
            commented = $.ajax({
                url:"/comment",
                type:"POST",
                data:{
                    reqpost : postid,
                    commentinfo:comment
                }
            })
            commented.done(function(data){
                $(".parent-reply").css("display","grid")
                $(".reply").html(data.comment)
                setTimeout(function(){
                    $(".parent-reply").hide()
                },1000)
                $("#cmtarea").val("")
            })
            
            

            
            
        })
    })

       
    $(document).ready(function(){
        $(".btn-svg").on("click",function(){
            let post_id = $(this).val()
            $(".post-id").text(post_id)


        })

    })
    

            


   

    $(document).ready(function () {
        $(".like-update").on("click", function () {
            let likedpost = $(this).val()
            console.log(likedpost)
            afterliked = $.ajax({
                url: "/updatelike",
                type: "POST",
                data: {
                    likedpost: likedpost
                }
            })
            afterliked.done(function (data) {
                $("#like-counter" + likedpost).text(data.counter)
            })


        })
    })

    $(document).ready(function() {
        $(".delete-svg").on("click",function(){
            let del = $(".delete-svg").val()
            $(".del-link").attr("href",del)

        })
    })

    // copy link
    $(document).ready(function(){
        $(".share-svg").on("click",function(){
            let base = "http://127.0.0.1:5000/uniq/"
            let linkid = $(this).val()
            let join = base+linkid
            $("#url").val(join)

        
        

        })
        
    })
    $(document).ready(function(){
        $(".copy-button").on("click",function(){
            $("#url").select()

            document.execCommand('copy')
            

        })
    })


    
        </script>
    
    
    {%endblock%}